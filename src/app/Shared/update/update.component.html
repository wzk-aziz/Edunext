<!-- src/app/components/update-user/update-user.component.html -->
<div class="container">
  <div *ngIf="showSuccess" class="alert alert-success alert-dismissible fade show" role="alert">
    User updated successfully!
  </div>
  <h2>Update User</h2>

  <!-- Form to update user -->
  <form [formGroup]="userForm" (ngSubmit)="updateUser()">
    
    <!-- First Name -->
    <div class="form-group">
      <label for="firstname">First Name *</label>
      <input 
        id="firstname" 
        formControlName="firstname" 
        class="form-control" 
        [ngClass]="{ 'is-invalid': userForm.controls['firstname'].invalid && userForm.controls['firstname'].touched }"
      />
      <div *ngIf="userForm.controls['firstname'].invalid && userForm.controls['firstname'].touched" class="invalid-feedback">
        First Name is required.
      </div>
    </div>

    <!-- Last Name -->
    <div class="form-group">
      <label for="lastname">Last Name *</label>
      <input 
        id="lastname" 
        formControlName="lastname" 
        class="form-control" 
        [ngClass]="{ 'is-invalid': userForm.controls['lastname'].invalid && userForm.controls['lastname'].touched }"
      />
      <div *ngIf="userForm.controls['lastname'].invalid && userForm.controls['lastname'].touched" class="invalid-feedback">
        Last Name is required.
      </div>
    </div>

    <!-- Email -->
    <div class="form-group">
      <label for="email">Email *</label>
      <input 
        id="email" 
        formControlName="email" 
        type="email" 
        class="form-control" 
        [ngClass]="{ 'is-invalid': userForm.controls['email'].invalid && userForm.controls['email'].touched }"
      />
      <div *ngIf="userForm.controls['email'].invalid && userForm.controls['email'].touched" class="invalid-feedback">
        Please enter a valid email.
      </div>
    </div>

    <!-- Password -->
    <div class="form-group">
      <label for="password">Password *</label>
      <input 
        id="password" 
        formControlName="password" 
        type="password" 
        class="form-control" 
        [ngClass]="{ 'is-invalid': userForm.controls['password'].invalid && userForm.controls['password'].touched }"
      />
      <div *ngIf="userForm.controls['password'].invalid && userForm.controls['password'].touched" class="invalid-feedback">
        Password is required and should be at least 6 characters long.
      </div>
    </div>

    <!-- Role -->
    <div class="form-group">
      <label for="role">Role *</label>
      <select 
        id="role" 
        formControlName="role" 
        class="form-control" 
        [ngClass]="{ 'is-invalid': userForm.controls['role'].invalid && userForm.controls['role'].touched }"
      >
        <option value="LEARNER">Learner</option>
        <option value="TEACHER">Teacher</option>
      </select>
      <div *ngIf="userForm.controls['role'].invalid && userForm.controls['role'].touched" class="invalid-feedback">
        Please select a role.
      </div>
    </div>

    <!-- Space between Role and Button -->
    <div style="margin-bottom: 20px;"></div>

    <!-- Submit Button -->
    <button 
    type="submit" 
    class="btn btn-primary"
    (click)="userForm.markAllAsTouched()"
    [disabled]="updating"
  >
    {{ updating ? 'Updating...' : 'Update' }}
  </button>

    <!-- Error message for incomplete form -->
    <div *ngIf="userForm.invalid && userForm.touched" class="mt-3 text-danger">
      Please fill out all required fields.
    </div>
  </form>
</div>
